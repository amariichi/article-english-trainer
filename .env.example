PORT=3000
JSON_BODY_LIMIT_MB=16
LLM_PROVIDER=nemotron
ALLOW_PROVIDER_OVERRIDE=true

# local_llama_cpp: call local llama.cpp OpenAI-compatible server (no API key needed)
# local_vllm: deprecated compatibility mode
# remote_api: call hosted API endpoint (API key required)
NEMOTRON_RUNTIME=local_llama_cpp
NEMOTRON_API_KEY=
NEMOTRON_BASE_URL=http://127.0.0.1:8000/v1
NEMOTRON_MODEL_ID=nemotron-3-nano
# local llama.cpp settings for `npm run nemotron:serve`
NEMOTRON_GGUF_PATH=
# Set full path when llama-server is not in PATH.
NEMOTRON_LLAMA_SERVER_BIN=/PATH/TO/llama-server
NEMOTRON_N_GPU_LAYERS=-1
NEMOTRON_THREADS=
# Recommended on 32GB VRAM. Increase gradually (e.g. 16384) only if stable.
# 65536 may require far more KV cache memory and can cause OOM.
NEMOTRON_MAX_MODEL_LEN=8192
NEMOTRON_MAX_NUM_SEQS=1

# Optional: set when you want to force a specific Gemini model.
GEMINI_MODEL_ID=gemini-3-flash-preview

# ASR routing (Parakeet)
ASR_FAST_URL=http://127.0.0.1:8091/v1/asr/fast
ASR_JA_URL=http://127.0.0.1:8091/v1/asr/ja
ASR_EN_URL=http://127.0.0.1:8091/v1/asr/en
ASR_MIXED_URL=http://127.0.0.1:8091/v1/asr/mixed
ASR_MODEL_FAST=nvidia/parakeet-tdt-0.6b-v2
ASR_MODEL_JA=nvidia/parakeet-tdt_ctc-0.6b-ja
ASR_MODEL_EN=nvidia/parakeet-tdt-0.6b-v2
ASR_MODEL_MIXED=nvidia/parakeet-tdt-0.6b-v2
# ASR_DEVICE=cpu (default) is recommended when running local Nemotron on the same GPU.
# Set ASR_DEVICE=cuda only if you have enough free VRAM.
ASR_DEVICE=cpu
ASR_SINGLE_MODEL_CACHE=true
ASR_PRELOAD_MODELS=false
# when dual-GPU resident mode crashes (exit 134/139), retry once in single-cache mode
ASR_ENABLE_CUDA_FALLBACK=true
ASR_LANGUAGE_THRESHOLD=0.75
ASR_SKIP_FAST_WHEN_HINTED=true
ASR_SKIP_REDUNDANT_DECODE=true
MIC_MAX_RECORDING_MS=20000
ASR_FAST_TIMEOUT_MS=15000
ASR_DECODE_TIMEOUT_MS=60000

# TTS backend:
# - http_audio: return audio via HTTP endpoint (generic / default, works with local tts-worker)
# - minimum_headroom_face_say: send speech text to MinimumHeadroom face_say
# - disabled: disable TTS output
TTS_BACKEND=http_audio
# For TTS_BACKEND=http_audio, point to local tts-worker (or your remote TTS API).
TTS_ENDPOINT_URL=http://127.0.0.1:8092/v1/tts
# For TTS_BACKEND=minimum_headroom_face_say, keep the endpoint as-is or blank (unused).
TTS_TIMEOUT_MS=10000
TTS_DEFAULT_VOICE=af_heart
# Optional explicit Kokoro model paths for local tts-worker.
# If empty, tts-worker auto-detects from:
#   ./assets/kokoro/*
#   ../minimum-headroom/assets/kokoro/*
TTS_KOKORO_MODEL_PATH=
TTS_KOKORO_VOICES_PATH=
# Local tts-worker synthesis guard
TTS_MAX_CHARS=8000
MINIMUM_HEADROOM_WS_URL=ws://127.0.0.1:8765/ws
MINIMUM_HEADROOM_SESSION_ID=english-trainer
MINIMUM_HEADROOM_SAY_PRIORITY=2
MINIMUM_HEADROOM_SAY_POLICY=replace
MINIMUM_HEADROOM_SAY_TTL_MS=60000
MINIMUM_HEADROOM_SAY_TIMEOUT_MS=700

AGENT_BROWSER_SESSION=article-main
AGENT_BROWSER_STATE_PATH=.local/article-auth-state.json
# hard timeout per agent-browser command
AGENT_BROWSER_COMMAND_TIMEOUT_MS=10000
# timeout only for `agent-browser wait --load networkidle`
AGENT_BROWSER_WAIT_NETWORKIDLE_TIMEOUT_MS=3000
# unreadable URLs are treated as failed when this probe timeout is exceeded
ARTICLE_REACHABILITY_TIMEOUT_MS=3000
ARTICLE_MIN_CHARS=1200
